<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Movie List App!</title>
    <link th:href="@{/css/main.css}" rel="stylesheet" />
    <script th:src="@{/js/movielistscript.js}" defer></script>
    <link rel="stylesheet" />
  </head>
  <body>
    <header class="header">
      <nav class="navigation">
        <ul>
          <li><a href="/movies">Home</a></li>
          <li><a href="https://www.imdb.com/">Imdb</a></li>
        </ul>
      </nav>
    </header>

    <div class="content">
      <div class="table-header">
        <h3>Movies</h3>
        <a href="/movies/add" id="add-button"><h2>Add</h2></a>
      </div>

      <table class="movietable">
        <thead>
          <tr>
            <th>Rank</th>
            <th>Score</th>
            <th>Title</th>
            <th>Genre</th>
            <th>Edit</th>
            <th>Delete</th>
          </tr>
        </thead>
        <tbody>
          <!-- Use Thymeleaf to loop through list of movies object, and input each individual movie into a table row -->
          <tr th:each="movie, stat : ${movieList}">
            <!-- stat also holds info like index (starting from 0), count (starting from 1), size (size of list), current (item being procesed)-->
            <td th:text="${stat.count}">Rank</td>
            <td th:text="${movie.rating}">Score</td>
            <td th:text="${movie.title}">Movie</td>
            <td th:text="${movie.genre}">Genre</td>
            <td>
              <a
                th:href="@{/movies/{id}/edit(id=${movie.id})}"
                class="btn"
                id="edit-button"
                >Edit</a
              >
            </td>
            <td>
              <button
                th:onclick="deleteRow([[${movie.id}]])"
                class="btn btn-delete"
              >
                Delete
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <footer class="footer">
      <!-- Display Success Message -->
      <div th:if="${success == null and error == null}" class="message">
        <p>Messages will display here...</p>
      </div>

      <!-- Display Success Message -->
      <div th:if="${success != null}" class="success-message">
        <p th:text="${success}"></p>
      </div>

      <!-- Display Error Message -->
      <div th:if="${error != null}" class="error-message">
        <p th:text="${error}"></p>
      </div>
    </footer>
  </body>
</html>
